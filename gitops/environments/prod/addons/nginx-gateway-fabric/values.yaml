nginxGateway:
  # use a predictable GatewayClass name and controller id for this install
  gatewayClassName: nginx
  gatewayControllerName: gateway.nginx.org/nginx-gateway-controller
  # pin control plane image to release that matches the chart version we deploy
  image:
    tag: 2.2.2

nginx:
  # pin dataplane image to the same release
  image:
    tag: 2.2.2
  service:
    # MetalLB uses default class; no explicit class to let controller claim it
    externalTrafficPolicy: Local

# create a Gateway resource for north-south traffic
gateways:
  - name: nginx-gateway
    namespace: nginx-gateway-fabric
    labels:
      app: nginx-gateway-fabric
    spec:
      gatewayClassName: nginx
      listeners:
        - name: http
          port: 80
          protocol: HTTP
          allowedRoutes:
            namespaces:
              from: All
        - name: https
          port: 443
          protocol: TLS
          tls:
            mode: Passthrough
          allowedRoutes:
            namespaces:
              from: All
